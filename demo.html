<!DOCTYPE html>
<html lang="en">
	<head>
	    <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	    <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="Anh Tran">
	    <link rel="shortcut icon" href="assets/ico/favicon.ico">
	    <link href="assets/css/bootstrap.css" rel="stylesheet">
	    <link href="assets/css/style.css" rel="stylesheet">
	    <link href="assets/css/font-awesome.min.css" rel="stylesheet">
	    <script src="assets/js/modernizr.js"></script>
        <script src="canvas.min.js"></script>
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
		
        <style>
        	.bs-example {
		    	margin-left: 30px;
		    	margin-right: 30px;
		    	margin-top: 40px;
		    	margin-bottom: 20px;
		    }

            .chart-config {
                width: 100%;
                height: 400px;
                float: left;
            }
            #graph_id td {
            	width: 50%;
            }
        </style>

        <script type="text/javascript">        
        	function resizeChart() {
        		document.getElementById("pieChartContainer").innerHTML = "";
        		document.getElementById("barChartContainer").innerHTML = "";
				var x = document.getElementById('graph_id');
			    if (x.style.display != 'none') {
			    	showPieGraph(parseFloat(document.forms[0].member1_ysc.value), parseFloat(document.forms[0].member2_ysc.value),
                			parseFloat(document.forms[0].member3_ysc.value),parseFloat(document.forms[0].member4_ysc.value));
                	showBarGraph(parseFloat(document.forms[0].member1_ysc.value), parseFloat(document.forms[0].member2_ysc.value),
                			parseFloat(document.forms[0].member3_ysc.value),parseFloat(document.forms[0].member4_ysc.value));
			    }
        	}

        	function loadBody() {
	            document.getElementById("graph_id").style.display = 'none';
	            google.charts.load('current', {'packages':['corechart']});
	        }
	        
        	function resetData(form) {
        		form.member1_name.value = "";
        		form.member2_name.value = "";
        		form.member3_name.value = "";
        		form.member4_name.value = "";
        		form.member1_ocs.value = 100000;
        		form.member2_ocs.value = 100000;
        		form.member3_ocs.value = 100000;
        		form.member4_ocs.value = 100000;
        		form.member1_hw.value = 30;
        		form.member2_hw.value = 40;
        		form.member3_hw.value = 50;
        		form.member4_hw.value = 60;
        		form.member1_ic.value = "";
        		form.member2_ic.value = "";
        		form.member3_ic.value = "";
        		form.member4_ic.value = "";
        		form.member1_cc.value = 500;
        		form.member2_cc.value = 600;
        		form.member3_cc.value = 750;
        		form.member4_cc.value = 1000;
        		form.member1_djtp.value = "";
        		form.member2_djtp.value = "";
        		form.member3_djtp.value = "";
        		form.member4_djtp.value = ""; 		
        		form.member1_ysc.value = "";
        		form.member2_ysc.value = "";
        		form.member3_ysc.value = "";
        		form.member4_ysc.value = "";
        		form.member1_ysp.value = "";
        		form.member2_ysp.value = "";
        		form.member3_ysp.value = "";
        		form.member4_ysp.value = "";
        		
        		var x = document.getElementById('graph_id');
			    if (x.style.display != 'none') {
			        x.style.display = 'none';
			    }
        	}
        	function isEmpty(str) {
			    return (!str || 0 === str.length);
			}
        	function dataValid(form) {
        		if(isEmpty(form.member1_ocs.value) || parseFloat(form.member1_ocs.value) < 0) {
        			return false;
        		}
        		if(isEmpty(form.member2_ocs.value) || parseFloat(form.member2_ocs.value) < 0) {
        			return false;
        		}
        		if(isEmpty(form.member3_ocs.value) || parseFloat(form.member3_ocs.value) < 0) {
        			return false;
        		}
        		if(isEmpty(form.member4_ocs.value) || parseFloat(form.member4_ocs.value) < 0) {
        			return false;
        		}
        		
        		if(isEmpty(form.member1_hw.value) || parseFloat(form.member1_hw.value) < 0) {
        			return false;
        		}
        		if(isEmpty(form.member2_hw.value) || parseFloat(form.member2_hw.value) < 0) {
        			return false;
        		}
        		if(isEmpty(form.member3_hw.value) || parseFloat(form.member3_hw.value) < 0) {
        			return false;
        		}
        		if(isEmpty(form.member4_hw.value) || parseFloat(form.member4_hw.value) < 0) {
        			return false;
        		}
        		
        		if(isEmpty(form.member1_cc.value) || parseFloat(form.member1_cc.value) < 0) {
        			return false;
        		}
        		if(isEmpty(form.member2_cc.value) || parseFloat(form.member2_cc.value) < 0) {
        			return false;
        		}
        		if(isEmpty(form.member3_cc.value) || parseFloat(form.member3_cc.value) < 0) {
        			return false;
        		}
        		if(isEmpty(form.member4_cc.value) || parseFloat(form.member4_cc.value) < 0) {
        			return false;
        		}
        		
        		return true;
        	}
            function calculation(form) {
				if(dataValid(form) == false)  {
					return;
				}          	

                /* member 1 */
                var opportunityCostPerHour = calculateOpportunityCostPerHour(form.member1_ocs.value);
                var theoreticalContribution = calculateTheoreticalContribution(opportunityCostPerHour, form.member1_hw.value);
                var shareCash = calculateShareCash(form.member1_cc.value, theoreticalContribution);
                form.member1_ysc.value = Number(shareCash).toFixed(2);

                /* member 2 */
                opportunityCostPerHour = calculateOpportunityCostPerHour(form.member2_ocs.value);
                theoreticalContribution = calculateTheoreticalContribution(opportunityCostPerHour, form.member2_hw.value);
                shareCash = calculateShareCash(form.member2_cc.value, theoreticalContribution);
                form.member2_ysc.value = Number(shareCash).toFixed(2);

                /* member 3 */
                opportunityCostPerHour = calculateOpportunityCostPerHour(form.member3_ocs.value);
                theoreticalContribution = calculateTheoreticalContribution(opportunityCostPerHour, form.member3_hw.value);
                shareCash = calculateShareCash(form.member3_cc.value, theoreticalContribution);
                form.member3_ysc.value = Number(shareCash).toFixed(2);

                /* member 4 */
                opportunityCostPerHour = calculateOpportunityCostPerHour(form.member4_ocs.value);
                theoreticalContribution = calculateTheoreticalContribution(opportunityCostPerHour, form.member4_hw.value);
                shareCash = calculateShareCash(form.member4_cc.value, theoreticalContribution);
                form.member4_ysc.value = Number(shareCash).toFixed(2);

                var total = parseFloat(form.member1_ysc.value) + parseFloat(form.member2_ysc.value)
                        + parseFloat(form.member3_ysc.value) + parseFloat(form.member4_ysc.value);
                form.member1_ysp.value = Number((form.member1_ysc.value * 100) / total).toFixed(2);
                form.member2_ysp.value = Number((form.member2_ysc.value * 100) / total).toFixed(2);
                form.member3_ysp.value = Number((form.member3_ysc.value * 100) / total).toFixed(2);
                form.member4_ysp.value = Number((form.member4_ysc.value * 100) / total).toFixed(2);
                
                document.getElementById("graph_id").style.display = 'block';
                
                showPieGraph(parseFloat(form.member1_ysc.value), parseFloat(form.member2_ysc.value),
                			parseFloat(form.member3_ysc.value),parseFloat(form.member4_ysc.value));
                showBarGraph(parseFloat(form.member1_ysc.value), parseFloat(form.member2_ysc.value),
                			parseFloat(form.member3_ysc.value),parseFloat(form.member4_ysc.value));
            }

            function calculateOpportunityCostPerHour(opportunityCostPerSalary) {
                return (opportunityCostPerSalary/52.1429)/37.5;
            }

            function calculateTheoreticalContribution(opportunityCostPerHour, hourWorked) {
                return opportunityCostPerHour * hourWorked;
            }

            function calculateShareCash(contributionCash, theoreticalContribution) {
                return (contributionCash * 4) + theoreticalContribution;
            }
            
            function showPieGraph(shareCash1, shareCash2, shareCash3, shareCash4) {
            	//google.charts.load('current', {'packages':['corechart']});
			    google.charts.setOnLoadCallback(drawChart);			
			    function drawChart() {
			        var data = google.visualization.arrayToDataTable([
			          ['Staff', 'Share'],
			          ['Member A', shareCash1],
			          ['Member B', shareCash2],
			          ['Member C', shareCash3],
			          ['Member D', shareCash4]
			        ]);
			
			        var options = {
			          title: 'Equity Split'
			        };
			
			        var chart = new google.visualization.PieChart(document.getElementById('pieChartContainer'));
			        chart.draw(data, options);
			    }
            }
            
            function showBarGraph(shareCash1, shareCash2, shareCash3, shareCash4) {
            	//google.charts.load('current', {'packages':['corechart']});
			    google.charts.setOnLoadCallback(drawChart);			
			    function drawChart() {
			        var data = google.visualization.arrayToDataTable([
			          ['Staff', 'Value', { role: 'style' }],
			          ['Member A', shareCash1, 'color: #3266CC'],
			          ['Member B', shareCash2, 'color: #DC3812'],
			          ['Member C', shareCash3, 'color: #FE9900'],
			          ['Member D', shareCash4, 'color: #109717']
			        ]);
			
			        var options = {
			          title: 'Equity Split'
			        };
			
			        var chart = new google.visualization.BarChart(document.getElementById('barChartContainer'));
			        chart.draw(data, options);
			    }
            }
        </script>

	</head>

	<body onload="loadBody()" onresize="resizeChart()">	
		<script>(function(d, s, id) {
		    var js, fjs = d.getElementsByTagName(s)[0];
		    if (d.getElementById(id)) return;
		    js = d.createElement(s); js.id = id;
		    js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.8&appId=1766789033574076";
		    fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));</script>
		
		<!-- Fixed navbar -->
		<div class="navbar navbar-default navbar-fixed-top" role="navigation">
		    <div class="container">
		        <div class="navbar-header">
		            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		                <span class="sr-only">Toggle navigation</span>
		                <span class="icon-bar"></span>
		                <span class="icon-bar"></span>
		                <span class="icon-bar"></span>
		            </button>
		            <a href="#back-to-top" class="navbar-brand" ><img class="pull-left" id="logo" src="assets/img/es_full_logo_bg.png"></a>
		        </div>
		        <div class="navbar-collapse collapse navbar-right">
		            <ul class="nav navbar-nav">
		                <li><a href="index.html">HOME</a></li>
		                <li><a href="index.html#about">ABOUT</a></li>
		                <li class="active"><a href="demo.html">DEMO</a></li>
		                <li><a href="index.html#contact">CONTACT</a></li>
		                <li><a href="blog.html">BLOG</a></li>
		            </ul>
		        </div><!--/.nav-collapse -->
		    </div>
		</div>
				
		<br><br><br><br>
		<h1 class="centered">Equity Split SpreadSheet</h1>
		<form id="formID" method="post" onsubmit="return false;">
		    <div>
		        <div class="bs-example">
		            <table class="table">
		            	<thead>
			                <tr class="info">
			                    <th><h4>Field</h4></th>
			                    <th><h4>Member A</h4></th>
			                    <th><h4>Member B</h4></th>
			                    <th><h4>Member C</h4></th>
			                    <th><h4>Member D</h4></th>
			                </tr>
						</thead>
						
						<tbody>
			                <tr class="active">
			                    <th >Name</th>
			                    <td><input type="text" class="form-control" name="member1_name"/></td>
			                    <td><input type="text" class="form-control" name="member2_name"/></td>
			                    <td><input type="text" class="form-control" name="member3_name"/></td>
			                    <td><input type="text" class="form-control" name="member4_name"/></td>
			                </tr>
			                <tr class="active">
			                    <th>Opportunity Cost / Salary ($)</th>
			                    <td><input type="number" class="form-control" name="member1_ocs" min="0" value="100000" required="required" /></td>
			                    <td><input type="number" class="form-control" name="member2_ocs" min="0" value="100000" required="required" /></td>
			                    <td><input type="number" class="form-control" name="member3_ocs" min="0" value="100000" required="required" /></td>
			                    <td><input type="number" class="form-control" name="member4_ocs" min="0" value="100000" required="required" /></td>
			                </tr>			
			                <tr class="active">
			                    <th>Hours Worked</th>
			                    <td><input type="number" class="form-control" name="member1_hw" min="0" value="30" required="required" /></td>
			                    <td><input type="number" class="form-control" name="member2_hw" min="0" value="40" required="required" /></td>
			                    <td><input type="number" class="form-control" name="member3_hw" min="0" value="50" required="required" /></td>
			                    <td><input type="number" class="form-control" name="member4_hw" min="0" value="60" required="required" /></td>
			                </tr>			
			                <tr class="active">
			                    <th>Invested Cash ($)</th>
			                    <td><input type="number" class="form-control" name="member1_ic" min="0"/></td>
			                    <td><input type="number" class="form-control" name="member2_ic" min="0"/></td>
			                    <td><input type="number" class="form-control" name="member3_ic" min="0"/></td>
			                    <td><input type="number" class="form-control" name="member4_ic" min="0"/></td>
			                </tr>			
			                <tr class="active">
			                    <th>Contribution Cash ($)</th>
			                    <td><input type="number" class="form-control" name="member1_cc" value="500" required="required" min="0"/></td>
			                    <td><input type="number" class="form-control" name="member2_cc" value="600" required="required" min="0"/></td>
			                    <td><input type="number" class="form-control" name="member3_cc" value="750" required="required" min="0"/></td>
			                    <td><input type="number" class="form-control" name="member4_cc" value="1000" required="required" min="0"/></td>
			                </tr>			
			                <tr class="active">
			                    <th>Date Joined The Project</th>
			                    <td><input type="text" class="form-control" name="member1_djtp"/></td>
			                    <td><input type="text" class="form-control" name="member2_djtp"/></td>
			                    <td><input type="text" class="form-control" name="member3_djtp"/></td>
			                    <td><input type="text" class="form-control" name="member4_djtp"/></td>
			                </tr>
			                <tr class="success">
			                    <th>Your Share ($)</th>
			                    <td><input type="text" class="form-control" name="member1_ysc" disabled/></td>
			                    <td><input type="text" class="form-control" name="member2_ysc" disabled/></td>
			                    <td><input type="text" class="form-control" name="member3_ysc" disabled/></td>
			                    <td><input type="text" class="form-control" name="member4_ysc" disabled/></td>
			                </tr>
			
			                <tr class="success">
			                    <th>Your Share (%)</th>
			                    <td><input type="text" class="form-control" name="member1_ysp" disabled/></td>
			                    <td><input type="text" class="form-control" name="member2_ysp" disabled/></td>
			                    <td><input type="text" class="form-control" name="member3_ysp" disabled/></td>
			                    <td><input type="text" class="form-control" name="member4_ysp" disabled/></td>
			
			                </tr>
						</tbody>
		            </table>
		        </div>
	
		    </div>
		</form>
		
		<div class="CalculationBut">
		      <input type="submit" name="calculationID" value="Calculation" class="btn btn-theme calculationID" onclick="calculation(formID)" />
		      <input type="button" name="resetID" value="Reset" class="btn btn-theme calculationID" onclick="resetData(formID)" />
		</div>
		
		<div id="graph_id" class="bs-example">
		    <table class="table table-bordered">
		        <tbody>
		            <tr>
		                <td>
		                	<div class="chart-config" id="pieChartContainer" >
							</div>
		                </td>
		                <td>
		                	<div class="chart-config" id="barChartContainer">
							</div>
		                </td>
		            </tr>
		        </tbody>
		    </table>
		</div>
		<br><br><br>
		<div id="footerwrap">
			<div class="container">
				<div class="row">
					<div class="col-lg-12">
						<h4>Social Links</h4>
						<div class="hline-w"></div>
						<p>
							<a href="https://www.facebook.com/equitysplit/"  target="_blank"><i class="fa fa-facebook"></i></a>
							<a href="https://twitter.com/equity_split"  target="_blank"><i class="fa fa-twitter"></i></a>
							<a href="https://www.linkedin.com/company/10975490"  target="_blank"><i class="fa fa-linkedin"></i></a>
							<a href="https://www.reddit.com/user/equity_split/"  target="_blank"><i class="fa fa-reddit-alien"></i></a>
						</p>
					</div>
				</div><!--/row -->
			</div> <!-- /row -->
			<div class="container">
				<div class="row centered">
					<p>Copyright &copy; 2017 Cohesive Bits.</p>
				</div>
			</div><!--/container -->
		</div><!--/footerwrap -->

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
		<script src="assets/js/bootstrap.min.js"></script>
		<script src="assets/js/retina-1.1.0.js"></script>
		<script src="assets/js/jquery.hoverdir.js"></script>
		<script src="assets/js/jquery.hoverex.min.js"></script>
		<script src="assets/js/jquery.prettyPhoto.js"></script>
		<script src="assets/js/jquery.isotope.min.js"></script>
		<script src="assets/js/custom.js"></script>
	</body>
</html>
